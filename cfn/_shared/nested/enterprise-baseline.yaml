# Author: TGibson
# Job Title: Cloud Architect
# Creation Date: 2025-08-26
# File Type: Cloudformation YAML Template
# Job Name: enterprise-baseline

AWSTemplateFormatVersion: "2010-09-09"
Description: >
  Enterprise baseline nested template (logs bucket + log group as safe defaults).
Parameters:
  Environment:
    Type: String
    AllowedValues: [dev, test, stage, prod]
    Default: dev
    Description: Deployment environment.
  ProjectName:
    Type: String
    Default: CorePlatform
    AllowedPattern: '^[a-zA-Z0-9\-]{1,32}$'
    Description: Project short code (letters/digits/hyphen).
  Owner:
    Type: String
    Default: tgibson@omgroup.example
    Description: Service owner (email or team).
  CostCenter:
    Type: String
    Default: CC-0000
    AllowedPattern: '^[A-Za-z0-9\-]{1,32}$'
    Description: Cost center or charge code.
  DataClassification:
    Type: String
    Default: Internal
    AllowedValues: [Public, Internal, Confidential, Restricted]
    Description: Data classification level.

Parameters:
  # (the parameters above are included by the parent template)
  Dummy:
    Type: String
    Default: "placeholder"

Resources:
  AppLogGroup:
    Type: AWS::Logs::LogGroup
    Properties:
      LogGroupName: !Sub "/{{ProjectName}}/{{Environment}}/nested"
      RetentionInDays: 30
      Tags:
        - Key: Project       ; Value: !Ref ProjectName
        - Key: Environment   ; Value: !Ref Environment
        - Key: Owner         ; Value: !Ref Owner
        - Key: CostCenter    ; Value: !Ref CostCenter
        - Key: DataClass     ; Value: !Ref DataClassification
        - Key: Author        ; Value: "TGibson"

